/*! ScrollMagic v2.0.0-alpha | (c) 2014 Jan Paepke (@janpaepke) | license & info: http://janpaepke.github.io/ScrollMagic */
!function(e,t){if("function"==typeof define&&define.amd)define(["TweenMax","TimelineMax"],t);else{var n=t(e.TweenMax,e.TimelineMax);e.ScrollMagic=n.Controller,e.ScrollScene=n.Scene}}(this,function(e,t){"use strict";var n=function(e){var t,n,i="ScrollMagic",o={container:window,vertical:!0,globalSceneOptions:{},loglevel:2,refreshInterval:100},c=this,u=f({},o,e),p=[],S=!1,b=0,F="PAUSED",R=!0,z=0,D=!0,N=function(){c.version=c.constructor.version;for(var e in u)o.hasOwnProperty(e)||delete u[e];if(u.container=E(u.container)[0],!u.container)throw i+" init failed.";R=!document.contains(u.container)||document==u.container,z=u.vertical?m(u.container):v(u.container),u.container.addEventListener("resize",x),u.container.addEventListener("scroll",x),u.refreshInterval=parseInt(u.refreshInterval),u.refreshInterval>0&&(n=window.setInterval(P,u.refreshInterval)),t=y(O)},C=function(){return u.vertical?h(u.container):d(u.container)},L=function(e){u.vertical?R?window.scrollTo(d(),e):u.container.scrollTop=e:R?window.scrollTo(e,h):u.container.scrollLeft=e},O=function(){if(t=y(O),D&&S){var e=s(S)?S:p.slice(0),n=b;b=c.scrollPos();var r=b-n;F=0===r?"PAUSED":r>0?"FORWARD":"REVERSE",0>r&&e.reverse(),e.forEach(function(e){e.update(!0)}),0===e.length&&u.loglevel>=3,S=!1}},x=function(e){"resize"==e.type&&(z=u.vertical?m(u.container):v(u.container)),S=!0},P=function(){R||z!=(u.vertical?m(u.container):v(u.container))&&u.container.dispatchEvent(new Event("resize",{bubbles:!1,cancelable:!1})),p.forEach(function(e){e.refresh()})},I=function(e){if(e.length<=1)return e;var t=e.slice(0);return t.sort(function(e,t){return e.scrollOffset()>t.scrollOffset()?1:-1}),t};return this.addScene=function(e){if(s(e))e.forEach(function(e){c.addScene(e)});else if(e instanceof r)if(e.parent()!=c)e.addTo(c);else if(g(e,p)<0){p.push(e),p=I(p),e.on("shift."+i+"_sort",function(){p=I(p)});for(var t in u.globalSceneOptions)e[t]&&e[t].call(e,u.globalSceneOptions[t])}return c},this.removeScene=function(e){if(s(e))e.forEach(function(e){c.removeScene(e)});else{var t=g(e,p);t>-1&&(e.off("shift."+i+"_sort"),p.splice(t,1),e.remove())}return c},this.updateScene=function(e,t){return s(e)?e.forEach(function(e){c.updateScene(e,t)}):t?e.update(!0):(s(S)||(S=[]),-1==g(e,S)&&S.push(e),S=I(S)),c},this.update=function(e){return x({type:"resize"}),e&&O(),c},this.scrollTo=function(e){if(l(e))L.call(u.container,e);else if(e instanceof r)e.parent()===c?c.scrollTo(e.scrollOffset()):log(2,"scrollTo(): The supplied scene does not belong to this controller. Scroll cancelled.",e);else if(a(e))L=e;else{var t=E(e)[0];if(t){var n=u.vertical?"top":"left",i=w(u.container),o=w(t);R||(i[n]-=c.scrollPos()),c.scrollTo(o[n]-i[n])}else log(2,"scrollTo(): The supplied argument is invalid. Scroll cancelled.",e)}return c},this.scrollPos=function(e){return arguments.length?(a(e)&&(C=e),c):C.call(c)},this.info=function(e){var t={size:z,vertical:u.vertical,scrollPos:b,scrollDirection:F,container:u.container,isDocument:R};return arguments.length?void 0!==t[e]?t[e]:void 0:t},this.loglevel=function(e){return arguments.length?(u.loglevel!=e&&(u.loglevel=e),c):u.loglevel},this.enabled=function(e){return arguments.length?(D!=e&&(D=!!e,c.updateScene(p,!0)),c):D},this.destroy=function(e){window.clearTimeout(n);for(var r=p.length;r--;)p[r].destroy(e);return u.container.removeEventListener("resize",x),u.container.removeEventListener("scroll",x),T(t),null},N(),c};n.version="2.0.0-alpha";var r=function(e){var r,i,c,g,h,d,p={onCenter:.5,onEnter:1,onLeave:0},y={duration:0,offset:0,triggerElement:void 0,triggerHook:"onCenter",reverse:!0,tweenChanges:!1,loglevel:2},T=this,R=f({},y,e),z="BEFORE",D=0,N={start:0,end:0},C=0,L=!0,O=[],x={},P={unknownOptionSupplied:function(){for(var e in R)y.hasOwnProperty(e)||delete R[e]},duration:function(){if(a(R.duration)){r=R.duration;try{R.duration=parseFloat(r())}catch(e){r=void 0,R.duration=y.duration}}else R.duration=parseFloat(R.duration),(!l(R.duration)||R.duration<0)&&(R.duration=y.duration)},offset:function(){R.offset=parseFloat(R.offset),l(R.offset)||(R.offset=y.offset)},triggerElement:function(){if(R.triggerElement){var e=E(R.triggerElement)[0];R.triggerElement=e?e:y.triggerElement}},triggerHook:function(){R.triggerHook in p||(R.triggerHook=l(R.triggerHook)?Math.max(0,Math.min(parseFloat(R.triggerHook),1)):y.triggerHook)},reverse:function(){R.reverse=!!R.reverse},tweenChanges:function(){R.tweenChanges=!!R.tweenChanges}},I=function(){k(),T.on("change.internal",function(e){"loglevel"!==e.what&&"tweenChanges"!==e.what&&("triggerElement"===e.what?G():"reverse"===e.what&&T.update())}).on("shift.internal",function(e){A(),T.update(),("AFTER"===z&&"duration"===e.reason||"DURING"===z&&0===R.duration)&&B()}).on("progress.internal",function(){H(),B()})},k=function(e){if(arguments.length)s(e)||(e=[e]);else{e=[];for(var t in P)e.push(t)}e.forEach(function(e){P[e]&&P[e]()})},U=function(e,t){var n=!1,r=R[e];return R[e]!=t&&(R[e]=t,k(e),n=r!=R[e]),n},A=function(){N={start:C+R.offset},i&&R.triggerElement&&(N.start-=i.info("size")*T.triggerHook()),N.end=N.start+R.duration},M=function(e){if(r){var t="duration";U(t,r.call(T))&&!e&&(T.trigger("change",{what:t,newval:R[t]}),T.trigger("shift",{reason:t}))}},G=function(e){var t=0,n=R.triggerElement;if(i&&n){for(var r=i.info(),o=w(r.container),a=r.vertical?"top":"left";n.parentNode.dataset.isScrollMagicPinSpacer;)n=n.parentNode;var s=w(n);r.isDocument||(o[a]-=i.scrollPos()),t=s[a]-o[a]}var l=t!=C;C=t,l&&!e&&T.trigger("shift",{reason:"triggerElementPosition"})},H=function(e){if(c){var t=e>=0&&1>=e?e:D;if(-1===c.repeat())if("DURING"===z&&c.paused())c.play();else{if("DURING"===z||c.paused())return!1;c.pause()}else{if(t==c.progress())return!1;0===R.duration?"DURING"===z?c.play():c.reverse():R.tweenChanges?c.tweenTo(t*c.duration()):c.progress(t).pause()}return!0}return!1},B=function(e){if(g&&i){var t=i.info();if(e||"DURING"!==z){var n={position:h.inFlow?"relative":"absolute",top:0,left:0},r=F(g,"position")!=n.position;h.pushFollowers?R.duration>0&&("AFTER"===z&&0===parseFloat(F(h.spacer,"padding-top"))?r=!0:"BEFORE"===z&&0===parseFloat(F(h.spacer,"padding-bottom"))&&(r=!0)):n[t.vertical?"top":"left"]=R.duration*D,F(g,n),r&&W()}else{"fixed"!=F(g,"position")&&(F(g,{position:"fixed"}),W());var o=w(h.spacer,!0),a=R.reverse||0===R.duration?t.scrollPos-N.start:Math.round(D*R.duration*10)/10;o.top-=parseFloat(F(h.spacer,"margin-top")),o[t.vertical?"top":"left"]+=a,F(g,{top:o.top,left:o.left})}}},W=function(){if(g&&i&&h.inFlow){var e="AFTER"===z,t="BEFORE"===z,n="DURING"===z,r="fixed"==F(g,"position"),o=i.info("vertical"),a=h.spacer.children[0],s=u(F(h.spacer,"display")),l={};s?(l["margin-top"]=t||n&&r?F(g,"margin-top"):"auto",l["margin-bottom"]=e||n&&r?F(g,"margin-bottom"):"auto"):l["margin-top"]=l["margin-bottom"]="auto",h.relSize.width||h.relSize.autoFullWidth?r?v(window)==v(h.spacer.parentNode)?F(g,{width:h.relSize.autoFullWidth?"100%":"inherit"}):F(g,{width:v(h.spacer)}):F(g,{width:"100%"}):(l["min-width"]=v(a,!0,a!==g),l.width=r?l["min-width"]:"auto"),h.relSize.height?r?m(window)==m(h.spacer.parentNode)?F(g,{height:"inherit"}):F(g,{height:m(h.spacer)}):F(g,{height:"100%"}):(l["min-height"]=m(a,!0,!s),l.height=r?l["min-height"]:"auto"),h.pushFollowers&&(l["padding"+(o?"Top":"Left")]=R.duration*D,l["padding"+(o?"Bottom":"Right")]=R.duration*(1-D)),F(h.spacer,l)}},_=function(){i&&g&&"DURING"===z&&!i.info("isDocument")&&B()},j=function(){i&&g&&"DURING"===z&&((h.relSize.width||h.relSize.autoFullWidth)&&v(window)!=v(h.spacer.parentNode)||h.relSize.height&&m(window)!=m(h.spacer.parentNode))&&W()},q=function(){j(),T.triggerHook()>0&&T.trigger("shift",{reason:"containerResize"})},$=function(e){i&&g&&"DURING"===z&&!i.info("isDocument")&&(e.preventDefault(),i.scrollTo(i.info("scrollPos")-(e.wheelDelta/3||30*-e.detail)))};this.parent=function(){return i},this.duration=function(e){var t="duration";return arguments.length?(a(e)||(r=void 0),U(t,e)&&(T.trigger("change",{what:t,newval:R[t]}),T.trigger("shift",{reason:t})),T):R[t]},this.offset=function(e){var t="offset";return arguments.length?(U(t,e)&&(T.trigger("change",{what:t,newval:R[t]}),T.trigger("shift",{reason:t})),T):R[t]},this.triggerElement=function(e){var t="triggerElement";return arguments.length?(U(t,e)&&T.trigger("change",{what:t,newval:R[t]}),T):R[t]},this.triggerHook=function(e){var t="triggerHook";return arguments.length?(U(t,e)&&(T.trigger("change",{what:t,newval:R[t]}),T.trigger("shift",{reason:t})),T):l(R[t])?R[t]:p[R[t]]},this.reverse=function(e){var t="reverse";return arguments.length?(U(t,e)&&T.trigger("change",{what:t,newval:R[t]}),T):R[t]},this.tweenChanges=function(e){var t="tweenChanges";return arguments.length?(U(t,e)&&T.trigger("change",{what:t,newval:R[t]}),T):R[t]},this.loglevel=function(e){var t="loglevel";return arguments.length?(U(t,e)&&T.trigger("change",{what:t,newval:R[t]}),T):R[t]},this.state=function(){return z},this.triggerPosition=function(){var e=R.offset;return i&&(e+=R.triggerElement?C:i.info("size")*T.triggerHook()),e},this.scrollOffset=function(){return N.start},this.update=function(e){if(i)if(e)if(i.enabled()&&L){var t,n=i.info("scrollPos");t=R.duration>0?(n-N.start)/(N.end-N.start):n>=N.start?1:0,T.trigger("update",{startPos:N.start,endPos:N.end,scrollPos:n}),T.progress(t)}else g&&"DURING"===z&&B(!0);else i.updateScene(T,!1);return T},this.refresh=function(){return M(),G(),T},this.progress=function(e){if(arguments.length){var t=!1,n=z,r=i?i.info("scrollDirection"):"PAUSED",o=R.reverse||e>=D;if(0===R.duration?(t=D!=e,D=1>e&&o?0:1,z=0===D?"BEFORE":"DURING"):0>=e&&"BEFORE"!==z&&o?(D=0,z="BEFORE",t=!0):e>0&&1>e&&o?(D=e,z="DURING",t=!0):e>=1&&"AFTER"!==z?(D=1,z="AFTER",t=!0):"DURING"!==z||o||B(),t){var a={progress:D,state:z,scrollDirection:r},s=z!=n,l=function(e){T.trigger(e,a)};s&&"DURING"!==n&&(l("enter"),l("BEFORE"===n?"start":"end")),l("progress"),s&&"DURING"!==z&&(l("BEFORE"===z?"start":"end"),l("leave"))}return T}return D},this.setTween=function(e){if(!t)return T;c&&T.removeTween();try{c=new t({smoothChildTiming:!0}).add(e).pause()}catch(n){}finally{e.repeat&&-1===e.repeat()&&(c.repeat(-1),c.yoyo(e.yoyo()))}return H(),T},this.removeTween=function(e){return c&&(e&&H(0),c.kill(),c=void 0),T},this.setPin=function(e,t){var n={pushFollowers:!0,spacerClass:"scrollmagic-pin-spacer"};if(t=f({},n,t),e=E(e)[0],!e)return T;if("fixed"===F(e,"position"))return T;if(g){if(g===e)return T;T.removePin()}g=e,g.parentNode.style.display="none";var r="absolute"!=F(g,"position"),i=F(g,["display","top","left","bottom","right"]),o=F(g,["width","height"]);g.parentNode.style.display="",!r&&t.pushFollowers&&(t.pushFollowers=!1);var a=g.parentNode.insertBefore(document.createElement("div"),g);F(a,f(i,{position:r?"relative":"absolute","margin-left":"auto","margin-right":"auto","box-sizing":"content-box"})),a.dataset.isScrollMagicPinSpacer=!0,S(a,t.spacerClass);var s=g.style;return h={spacer:a,relSize:{width:"%"===o.width.slice(-1),height:"%"===o.height.slice(-1),autoFullWidth:"auto"===o.width&&r&&u(i.display)},pushFollowers:t.pushFollowers,inFlow:r,origStyle:{width:s.width||"",position:s.position||"",top:s.top||"",left:s.left||"",bottom:s.bottom||"",right:s.right||"","box-sizing":s["box-sizing"]||"","-moz-box-sizing":s["-moz-box-sizing"]||"","-webkit-box-sizing":s["-webkit-box-sizing"]||""}},h.relSize.width&&F(a,{width:o.width}),h.relSize.height&&F(a,{height:o.height}),a.appendChild(g),F(g,{position:r?"relative":"absolute",top:"auto",left:"auto",bottom:"auto",right:"auto"}),(h.relSize.width||h.relSize.autoFullWidth)&&F(g,{"box-sizing":"border-box"}),window.addEventListener("scroll",_),window.addEventListener("resize",_),g.addEventListener("mousewheel",$),g.addEventListener("DOMMouseScroll",$),B(),T},this.removePin=function(e){return g&&(e||!i?(h.spacer.parentNode.insertBefore(g,h.spacer),h.spacer.parentNode.removeChild(h.spacer),F(g,h.origStyle)):"DURING"===z&&B(!0),window.removeEventListener("scroll",_),window.removeEventListener("resize",_),g.removeEventListener("mousewheel",$),g.removeEventListener("DOMMouseScroll",$),g=void 0),T},this.setClassToggle=function(e,t){var n=E(e);return 0!==n.length&&o(t)?(d=t,O=n,T.on("enter.internal_class leave.internal_class",function(e){var t="enter"===e.type?S:b;O.forEach(function(e){t(e,d)})}),T):T},this.removeClassToggle=function(e){return e&&O.forEach(function(e){b(e,d)}),T.off("start.internal_class end.internal_class"),d=void 0,O=[],T},this.addTo=function(e){return e instanceof n&&i!=e&&(i&&i.removeScene(T),i=e,k(),M(!0),G(!0),A(),W(),i.info("container").addEventListener("resize",q),e.addScene(T),T.update()),T},this.enabled=function(e){return arguments.length?(L!=e&&(L=!!e,T.update(!0)),T):L},this.remove=function(){if(i){i.info("container").removeEventListener("resize",q);var e=i;i=void 0,e.removeScene(T)}return T},this.destroy=function(e){return T.removeTween(e),T.removePin(e),T.removeClassToggle(e),T.trigger("destroy",{reset:e}),T.remove(),T.off("start end enter leave progress change update shift destroy shift.internal change.internal progress.internal"),null};var V=function(e,t){var n=e.split(".");t=t||{};for(var r in t)this[r]=t[r];return this.type=n[0],this.namespace=n[1]||"",this.timeStamp=Date.now(),this};return this.on=function(e,t){if(a(t)){var n=e.trim().split(" ");n.forEach(function(e){var n=e.split("."),r=n[0],i={namespace:n[1]||"",callback:t};x[r]||(x[r]=[]),x[r].push(i)})}return T},this.off=function(e,t){var n=e.trim().split(" ");return n.forEach(function(e){for(var n=e.split("."),r=n[0],i=n[1]||"",o=x[r]||[],a=o.length;a--;){var s=o[a];!s||i!==s.namespace||t&&t!=s.callback||o.splice(a,1)}o.length||delete x[r]}),T},this.trigger=function(e,t){var n=new V(e,t),r=x[n.type];return r&&(n.target=n.currentTarget=T,r.forEach(function(e){n.namespace&&n.namespace!==e.namespace||e.callback.call(T,n)})),T},I(),T},i=function(e){return Object.prototype.toString.call(e).replace(/^\[object (.+)\]$/,"$1").toLowerCase()},o=function(e){return"string"===i(e)},a=function(e){return"function"===i(e)},s=function(e){return Array.isArray(e)},l=function(e){return!s(e)&&e-parseFloat(e)+1>=0},c=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName},u=function(e){return["block","flex","list-item","table","-webkit-box"].indexOf(e)>-1},f=function(e){e=e||{};for(var t=1;t<arguments.length;t++)if(arguments[t])for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e},g=function(e,t){return t.indexOf(e)},h=function(e){return e=e||document,(window.pageYOffset||e.scrollTop||0)-(e.clientTop||0)},d=function(e){return e=e||document,(window.pageXOffset||e.scrollLeft||0)-(e.clientLeft||0)},p=function(e,t,n,r){t=t===document?window:t,e=e.charAt(0).toUpperCase()+e.substr(1).toLowerCase();var i=n?t["offset"+e]:t["client"+e]||t["inner"+e]||0;if(n&&r){var o=getComputedStyle(t);i+="Height"===e?parseFloat(o.marginTop)+parseFloat(o.marginBottom):parseFloat(o.marginLeft)+parseFloat(o.marginRight)}return i},v=function(e,t,n){return p("width",e,t,n)},m=function(e,t,n){return p("height",e,t,n)},w=function(e,t){var n={top:0,left:0};if(e&&e.getBoundingClientRect){var r=e.getBoundingClientRect();n.top=r.top,n.left=r.left,t||(n.top+=h(),n.left+=d())}return n},E=function(e){var t=[];if(o(e))try{e=document.querySelectorAll(e)}catch(n){return t}if("nodelist"===i(e))for(var r=0,a=t.length=e.length;a>r;r++)t[r]=e[r];else(c(e)||e===document||e===window)&&(t=[e]);return t},S=function(e,t){t&&(e.classList?e.classList.add(t):e.className+=" "+t)},b=function(e,t){t&&(e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "))},F=function(e,t){if(o(t))return getComputedStyle(e)[t];if(s(t)){var n={},r=getComputedStyle(e);return t.forEach(function(e){n[e]=r[e]}),n}for(var i in t){var a=t[i];a==parseFloat(a)&&(a+="px"),e.style[i]=a}},y=window.requestAnimationFrame,T=window.cancelAnimationFrame;return function(e){var t,n=0,r=["ms","moz","webkit","o"];for(t=0;!y&&t<r.length;++t)y=e[r[t]+"RequestAnimationFrame"],T=e[r[t]+"CancelAnimationFrame"]||e[r[t]+"CancelRequestAnimationFrame"];y||(y=function(t){var r=(new Date).getTime(),i=Math.max(0,16-(r-n)),o=e.setTimeout(function(){t(r+i)},i);return n=r+i,o}),T||(T=function(t){e.clearTimeout(t)})}(window),{Controller:n,Scene:r}});