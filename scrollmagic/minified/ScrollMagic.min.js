/*! ScrollMagic v2.0.0-alpha | (c) 2014 Jan Paepke (@janpaepke) | license & info: http://janpaepke.github.io/ScrollMagic */
!function(e,t){"function"==typeof define&&define.amd?define(t):e.ScrollMagic=t()}(this,function(){"use strict";var e=function(){};e.version="2.0.0-alpha",e.Controller=function(t){var n,a,s="ScrollMagic.Controller",l={container:window,vertical:!0,globalSceneOptions:{},loglevel:2,refreshInterval:100},h=this,w=c({},l,t),E=[],S=!1,F=0,R="PAUSED",T=!0,z=0,D=!0,C=function(){for(var e in w)l.hasOwnProperty(e)||delete w[e];if(w.container=m(w.container)[0],!w.container)throw s+" init failed.";T=w.container===window||w.container===document.body||!document.contains(w.container),T&&(w.container=window),z=w.vertical?p(w.container):d(w.container),w.container.addEventListener("resize",P),w.container.addEventListener("scroll",P),w.refreshInterval=parseInt(w.refreshInterval),w.refreshInterval>0&&(a=window.setInterval(x,w.refreshInterval)),n=b(O)},N=function(){return w.vertical?f(w.container):g(w.container)},L=function(e){w.vertical?T?window.scrollTo(g(),e):w.container.scrollTop=e:T?window.scrollTo(e,f):w.container.scrollLeft=e},O=function(){if(n=b(O),D&&S){var e=i(S)?S:E.slice(0),t=F;F=h.scrollPos();var r=F-t;R=0===r?"PAUSED":r>0?"FORWARD":"REVERSE",0>r&&e.reverse(),e.forEach(function(e){e.update(!0)}),0===e.length&&w.loglevel>=3,S=!1}},P=function(e){"resize"==e.type&&(z=w.vertical?p(w.container):d(w.container)),S=!0},x=function(){T||z!=(w.vertical?p(w.container):d(w.container))&&w.container.dispatchEvent(new Event("resize",{bubbles:!1,cancelable:!1})),E.forEach(function(e){e.refresh()})},I=function(e){if(e.length<=1)return e;var t=e.slice(0);return t.sort(function(e,t){return e.scrollOffset()>t.scrollOffset()?1:-1}),t};return this.addScene=function(t){if(i(t))t.forEach(function(e){h.addScene(e)});else if(t instanceof e.Scene)if(t.parent()!=h)t.addTo(h);else if(u(t,E)<0){E.push(t),E=I(E),t.on("shift."+s+"_sort",function(){E=I(E)});for(var n in w.globalSceneOptions)t[n]&&t[n].call(t,w.globalSceneOptions[n])}return h},this.removeScene=function(e){if(i(e))e.forEach(function(e){h.removeScene(e)});else{var t=u(e,E);t>-1&&(e.off("shift."+s+"_sort"),E.splice(t,1),e.remove())}return h},this.updateScene=function(e,t){return i(e)?e.forEach(function(e){h.updateScene(e,t)}):t?e.update(!0):(i(S)||(S=[]),-1==u(e,S)&&S.push(e),S=I(S)),h},this.update=function(e){return P({type:"resize"}),e&&O(),h},this.scrollTo=function(t){if(o(t))L.call(w.container,t);else if(t instanceof e.Scene)t.parent()===h?h.scrollTo(t.scrollOffset()):log(2,"scrollTo(): The supplied scene does not belong to this controller. Scroll cancelled.",t);else if(r(t))L=t;else{var n=m(t)[0];if(n){var i=w.vertical?"top":"left",a=v(w.container),s=v(n);T||(a[i]-=h.scrollPos()),h.scrollTo(s[i]-a[i])}else log(2,"scrollTo(): The supplied argument is invalid. Scroll cancelled.",t)}return h},this.scrollPos=function(e){return arguments.length?(r(e)&&(N=e),h):N.call(h)},this.info=function(e){var t={size:z,vertical:w.vertical,scrollPos:F,scrollDirection:R,container:w.container,isDocument:T};return arguments.length?void 0!==t[e]?t[e]:void 0:t},this.loglevel=function(e){return arguments.length?(w.loglevel!=e&&(w.loglevel=e),h):w.loglevel},this.enabled=function(e){return arguments.length?(D!=e&&(D=!!e,h.updateScene(E,!0)),h):D},this.destroy=function(e){window.clearTimeout(a);for(var t=E.length;t--;)E[t].destroy(e);return w.container.removeEventListener("resize",P),w.container.removeEventListener("scroll",P),y(n),null},C(),h},e.Scene=function(t){var a,l,u,f,g,h={onCenter:.5,onEnter:1,onLeave:0},b={duration:0,offset:0,triggerElement:void 0,triggerHook:"onCenter",reverse:!0,tweenChanges:!1,loglevel:2},y=this,F=c({},b,t),R="BEFORE",T=0,z={start:0,end:0},D=0,C=!0,N={unknownOptionSupplied:function(){for(var e in F)b.hasOwnProperty(e)||delete F[e]},duration:function(){if(r(F.duration)){a=F.duration;try{F.duration=parseFloat(a())}catch(e){a=void 0,F.duration=b.duration}}else F.duration=parseFloat(F.duration),(!o(F.duration)||F.duration<0)&&(F.duration=b.duration)},offset:function(){F.offset=parseFloat(F.offset),o(F.offset)||(F.offset=b.offset)},triggerElement:function(){if(F.triggerElement){var e=m(F.triggerElement)[0];F.triggerElement=e?e:b.triggerElement}},triggerHook:function(){F.triggerHook in h||(F.triggerHook=o(F.triggerHook)?Math.max(0,Math.min(parseFloat(F.triggerHook),1)):b.triggerHook)},reverse:function(){F.reverse=!!F.reverse},tweenChanges:function(){F.tweenChanges=!!F.tweenChanges}},L=function(){O(),y.on("change.internal",function(e){"loglevel"!==e.what&&"tweenChanges"!==e.what&&("triggerElement"===e.what?k():"reverse"===e.what&&y.update())}).on("shift.internal",function(e){x(),y.update(),("AFTER"===R&&"duration"===e.reason||"DURING"===R&&0===F.duration)&&A()}).on("progress.internal",function(){U(),A()})},O=function(e){if(arguments.length)i(e)||(e=[e]);else{e=[];for(var t in N)e.push(t)}e.forEach(function(e){N[e]&&N[e]()})},P=function(e,t){var n=!1,r=F[e];return F[e]!=t&&(F[e]=t,O(e),n=r!=F[e]),n},x=function(){z={start:D+F.offset},l&&F.triggerElement&&(z.start-=l.info("size")*y.triggerHook()),z.end=z.start+F.duration},I=function(e){if(a){var t="duration";P(t,a.call(y))&&!e&&(y.trigger("change",{what:t,newval:F[t]}),y.trigger("shift",{reason:t}))}},k=function(e){var t=0,n=F.triggerElement;if(l&&n){for(var r=l.info(),i=v(r.container),o=r.vertical?"top":"left";n.parentNode.dataset.isScrollMagicPinSpacer;)n=n.parentNode;var a=v(n);r.isDocument||(i[o]-=l.scrollPos()),t=a[o]-i[o]}var s=t!=D;D=t,s&&!e&&y.trigger("shift",{reason:"triggerElementPosition"})},U=function(e){if(u){var t=e>=0&&1>=e?e:T;if(-1===u.repeat())if("DURING"===R&&u.paused())u.play();else{if("DURING"===R||u.paused())return!1;u.pause()}else{if(t==u.progress())return!1;0===F.duration?"DURING"===R?u.play():u.reverse():F.tweenChanges?u.tweenTo(t*u.duration()):u.progress(t).pause()}return!0}return!1},A=function(e){if(f&&l){var t=l.info();if(e||"DURING"!==R){var n={position:g.inFlow?"relative":"absolute",top:0,left:0},r=S(f,"position")!=n.position;g.pushFollowers?F.duration>0&&("AFTER"===R&&0===parseFloat(S(g.spacer,"padding-top"))?r=!0:"BEFORE"===R&&0===parseFloat(S(g.spacer,"padding-bottom"))&&(r=!0)):n[t.vertical?"top":"left"]=F.duration*T,S(f,n),r&&G()}else{"fixed"!=S(f,"position")&&(S(f,{position:"fixed"}),G());var i=v(g.spacer,!0),o=F.reverse||0===F.duration?t.scrollPos-z.start:Math.round(T*F.duration*10)/10;i.top-=parseFloat(S(g.spacer,"margin-top")),i[t.vertical?"top":"left"]+=o,S(f,{top:i.top,left:i.left})}}},G=function(){if(f&&l&&g.inFlow){var e="AFTER"===R,t="BEFORE"===R,n="DURING"===R,r="fixed"==S(f,"position"),i=l.info("vertical"),o=g.spacer.children[0],a=s(S(g.spacer,"display")),c={};a?(c["margin-top"]=t||n&&r?S(f,"margin-top"):"auto",c["margin-bottom"]=e||n&&r?S(f,"margin-bottom"):"auto"):c["margin-top"]=c["margin-bottom"]="auto",g.relSize.width||g.relSize.autoFullWidth?r?d(window)==d(g.spacer.parentNode)?S(f,{width:g.relSize.autoFullWidth?"100%":"inherit"}):S(f,{width:d(g.spacer)}):S(f,{width:"100%"}):(c["min-width"]=d(o,!0,o!==f),c.width=r?c["min-width"]:"auto"),g.relSize.height?r?p(window)==p(g.spacer.parentNode)?S(f,{height:"inherit"}):S(f,{height:p(g.spacer)}):S(f,{height:"100%"}):(c["min-height"]=p(o,!0,!a),c.height=r?c["min-height"]:"auto"),g.pushFollowers&&(c["padding"+(i?"Top":"Left")]=F.duration*T,c["padding"+(i?"Bottom":"Right")]=F.duration*(1-T)),S(g.spacer,c)}},M=function(){l&&f&&"DURING"===R&&!l.info("isDocument")&&A()},H=function(){l&&f&&"DURING"===R&&((g.relSize.width||g.relSize.autoFullWidth)&&d(window)!=d(g.spacer.parentNode)||g.relSize.height&&p(window)!=p(g.spacer.parentNode))&&G()},B=function(){H(),y.triggerHook()>0&&y.trigger("shift",{reason:"containerResize"})},W=function(e){l&&f&&"DURING"===R&&!l.info("isDocument")&&(e.preventDefault(),l.scrollTo(l.info("scrollPos")-(e.wheelDelta/3||30*-e.detail)))};this.parent=function(){return l},this.duration=function(e){var t="duration";return arguments.length?(r(e)||(a=void 0),P(t,e)&&(y.trigger("change",{what:t,newval:F[t]}),y.trigger("shift",{reason:t})),y):F[t]},this.offset=function(e){var t="offset";return arguments.length?(P(t,e)&&(y.trigger("change",{what:t,newval:F[t]}),y.trigger("shift",{reason:t})),y):F[t]},this.triggerElement=function(e){var t="triggerElement";return arguments.length?(P(t,e)&&y.trigger("change",{what:t,newval:F[t]}),y):F[t]},this.triggerHook=function(e){var t="triggerHook";return arguments.length?(P(t,e)&&(y.trigger("change",{what:t,newval:F[t]}),y.trigger("shift",{reason:t})),y):o(F[t])?F[t]:h[F[t]]},this.reverse=function(e){var t="reverse";return arguments.length?(P(t,e)&&y.trigger("change",{what:t,newval:F[t]}),y):F[t]},this.tweenChanges=function(e){var t="tweenChanges";return arguments.length?(P(t,e)&&y.trigger("change",{what:t,newval:F[t]}),y):F[t]},this.loglevel=function(e){var t="loglevel";return arguments.length?(P(t,e)&&y.trigger("change",{what:t,newval:F[t]}),y):F[t]},this.state=function(){return R},this.triggerPosition=function(){var e=F.offset;return l&&(e+=F.triggerElement?D:l.info("size")*y.triggerHook()),e},this.scrollOffset=function(){return z.start},this.update=function(e){if(l)if(e)if(l.enabled()&&C){var t,n=l.info("scrollPos");t=F.duration>0?(n-z.start)/(z.end-z.start):n>=z.start?1:0,y.trigger("update",{startPos:z.start,endPos:z.end,scrollPos:n}),y.progress(t)}else f&&"DURING"===R&&A(!0);else l.updateScene(y,!1);return y},this.refresh=function(){return I(),k(),y},this.progress=function(e){if(arguments.length){var t=!1,n=R,r=l?l.info("scrollDirection"):"PAUSED",i=F.reverse||e>=T;if(0===F.duration?(t=T!=e,T=1>e&&i?0:1,R=0===T?"BEFORE":"DURING"):0>=e&&"BEFORE"!==R&&i?(T=0,R="BEFORE",t=!0):e>0&&1>e&&i?(T=e,R="DURING",t=!0):e>=1&&"AFTER"!==R?(T=1,R="AFTER",t=!0):"DURING"!==R||i||A(),t){var o={progress:T,state:R,scrollDirection:r},a=R!=n,s=function(e){y.trigger(e,o)};a&&"DURING"!==n&&(s("enter"),s("BEFORE"===n?"start":"end")),s("progress"),a&&"DURING"!==R&&(s("BEFORE"===R?"start":"end"),s("leave"))}return y}return T},this.setTween=function(e){if(!TimelineMax)return y;u&&y.removeTween();try{u=new TimelineMax({smoothChildTiming:!0}).add(e).pause()}catch(t){}finally{e.repeat&&-1===e.repeat()&&(u.repeat(-1),u.yoyo(e.yoyo()))}return U(),y},this.removeTween=function(e){return u&&(e&&U(0),u.kill(),u=void 0),y},this.setPin=function(e,t){var n={pushFollowers:!0,spacerClass:"scrollmagic-pin-spacer"};if(t=c({},n,t),e=m(e)[0],!e)return y;if("fixed"===S(e,"position"))return y;if(f){if(f===e)return y;y.removePin()}f=e,f.parentNode.style.display="none";var r="absolute"!=S(f,"position"),i=S(f,["display","top","left","bottom","right"]),o=S(f,["width","height"]);f.parentNode.style.display="",!r&&t.pushFollowers&&(t.pushFollowers=!1);var a=f.parentNode.insertBefore(document.createElement("div"),f);S(a,c(i,{position:r?"relative":"absolute","margin-left":"auto","margin-right":"auto","box-sizing":"content-box"})),a.dataset.isScrollMagicPinSpacer=!0,w(a,t.spacerClass);var l=f.style;return g={spacer:a,relSize:{width:"%"===o.width.slice(-1),height:"%"===o.height.slice(-1),autoFullWidth:"auto"===o.width&&r&&s(i.display)},pushFollowers:t.pushFollowers,inFlow:r,origStyle:{width:l.width||"",position:l.position||"",top:l.top||"",left:l.left||"",bottom:l.bottom||"",right:l.right||"","box-sizing":l["box-sizing"]||"","-moz-box-sizing":l["-moz-box-sizing"]||"","-webkit-box-sizing":l["-webkit-box-sizing"]||""}},g.relSize.width&&S(a,{width:o.width}),g.relSize.height&&S(a,{height:o.height}),a.appendChild(f),S(f,{position:r?"relative":"absolute",top:"auto",left:"auto",bottom:"auto",right:"auto"}),(g.relSize.width||g.relSize.autoFullWidth)&&S(f,{"box-sizing":"border-box"}),window.addEventListener("scroll",M),window.addEventListener("resize",M),f.addEventListener("mousewheel",W),f.addEventListener("DOMMouseScroll",W),A(),y},this.removePin=function(e){return f&&(e||!l?(g.spacer.parentNode.insertBefore(f,g.spacer),g.spacer.parentNode.removeChild(g.spacer),S(f,g.origStyle)):"DURING"===R&&A(!0),window.removeEventListener("scroll",M),window.removeEventListener("resize",M),f.removeEventListener("mousewheel",W),f.removeEventListener("DOMMouseScroll",W),f=void 0),y};var _,j=[];this.setClassToggle=function(e,t){var r=m(e);return 0!==r.length&&n(t)?(_=t,j=r,y.on("enter.internal_class leave.internal_class",function(e){var t="enter"===e.type?w:E;j.forEach(function(e){t(e,_)})}),y):y},this.removeClassToggle=function(e){return e&&j.forEach(function(e){E(e,_)}),y.off("start.internal_class end.internal_class"),_=void 0,j=[],y},this.addTo=function(t){return t instanceof e.Controller&&l!=t&&(l&&l.removeScene(y),l=t,O(),I(!0),k(!0),x(),G(),l.info("container").addEventListener("resize",B),t.addScene(y),y.update()),y},this.enabled=function(e){return arguments.length?(C!=e&&(C=!!e,y.update(!0)),y):C},this.remove=function(){if(l){l.info("container").removeEventListener("resize",B);var e=l;l=void 0,e.removeScene(y)}return y},this.destroy=function(e){return y.removeTween(e),y.removePin(e),y.removeClassToggle(e),y.trigger("destroy",{reset:e}),y.remove(),y.off("start end enter leave progress change update shift destroy shift.internal change.internal progress.internal"),null};var q={};return this.on=function(e,t){if(r(t)){var n=e.trim().split(" ");n.forEach(function(e){var n=e.split("."),r=n[0],i={namespace:n[1]||"",callback:t};q[r]||(q[r]=[]),q[r].push(i)})}return y},this.off=function(e,t){var n=e.trim().split(" ");return n.forEach(function(e){for(var n=e.split("."),r=n[0],i=n[1]||"",o=q[r]||[],a=o.length;a--;){var s=o[a];!s||i!==s.namespace||t&&t!=s.callback||o.splice(a,1)}o.length||delete q[r]}),y},this.trigger=function(t,n){var r=new e.Event(t,n),i=q[r.type];return i&&(r.target=r.currentTarget=y,i.forEach(function(e){r.namespace&&r.namespace!==e.namespace||e.callback.call(y,r)})),y},L(),y},e.Event=function(e,t){var n=e.split(".");t=t||{};for(var r in t)this[r]=t[r];return this.type=n[0],this.namespace=n[1]||"",this.timeStamp=Date.now(),this};var t=function(e){return Object.prototype.toString.call(e).replace(/^\[object (.+)\]$/,"$1").toLowerCase()},n=function(e){return"string"===t(e)},r=function(e){return"function"===t(e)},i=function(e){return Array.isArray(e)},o=function(e){return!i(e)&&e-parseFloat(e)+1>=0},a=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName},s=function(e){return["block","flex","list-item","table","-webkit-box"].indexOf(e)>-1},l=function(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})},c=function(e){e=e||{};for(var t=1;t<arguments.length;t++)if(arguments[t])for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e},u=function(e,t){return t.indexOf(e)},f=function(e){return e=e||document,(window.pageYOffset||e.scrollTop||0)-(e.clientTop||0)},g=function(e){return e=e||document,(window.pageXOffset||e.scrollLeft||0)-(e.clientLeft||0)},h=function(e,t,n,r){t=t===document?window:t,e=e.charAt(0).toUpperCase()+e.substr(1).toLowerCase();var i=n?t["offset"+e]:t["client"+e]||t["inner"+e]||0;if(n&&r){var o=getComputedStyle(t);i+="Height"===e?parseFloat(o.marginTop)+parseFloat(o.marginBottom):parseFloat(o.marginLeft)+parseFloat(o.marginRight)}return i},d=function(e,t,n){return h("width",e,t,n)},p=function(e,t,n){return h("height",e,t,n)},v=function(e,t){var n={top:0,left:0};if(e&&e.getBoundingClientRect){var r=e.getBoundingClientRect();n.top=r.top,n.left=r.left,t||(n.top+=f(),n.left+=g())}return n},m=function(e){var r=[];if(n(e))try{e=document.querySelectorAll(e)}catch(i){return r}if("nodelist"===t(e))for(var o=0,s=r.length=e.length;s>o;o++)r[o]=e[o];else(a(e)||e===document||e===window)&&(r=[e]);return r},w=function(e,t){t&&(e.classList?e.classList.add(t):e.className+=" "+t)},E=function(e,t){t&&(e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "))},S=function(e,t){if(n(t))return getComputedStyle(e)[l(t)];if(i(t)){var r={},o=getComputedStyle(e);return t.forEach(function(e){r[e]=o[l(e)]}),r}for(var a in t){var s=t[a];s==parseFloat(s)&&(s+="px"),e.style[l(a)]=s}},b=window.requestAnimationFrame,y=window.cancelAnimationFrame;return function(e){var t,n=0,r=["ms","moz","webkit","o"];for(t=0;!b&&t<r.length;++t)b=e[r[t]+"RequestAnimationFrame"],y=e[r[t]+"CancelAnimationFrame"]||e[r[t]+"CancelRequestAnimationFrame"];b||(b=function(t){var r=(new Date).getTime(),i=Math.max(0,16-(r-n)),o=e.setTimeout(function(){t(r+i)},i);return n=r+i,o}),y||(y=function(t){e.clearTimeout(t)})}(window),e});