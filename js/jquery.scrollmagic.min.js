/* ScrollMagic v1.1.0-alpha | (c) 2014 Jan Paepke (@janpaepke) | license & info: http://janpaepke.github.io/ScrollMagic */
!function(e,t){"use strict";var r=function(r){var i,s="ScrollMagic",a={container:t,vertical:!0,globalSceneOptions:{},loglevel:2,triggerPosUpdateInterval:100},l=this,c=e.extend({},a,r),g=[],u=!1,f=0,h="PAUSED",p=!0,d=0,v=!1,m=!0,w=function(){if(e.each(c,function(e){a.hasOwnProperty(e)||delete c[e]}),c.container=e(c.container).first(),0!==c.container.length){p=!e.contains(document,c.container.get(0)),d=c.vertical?c.container.height():c.container.width(),c.container.on("scroll resize",S);try{TweenLite.ticker.addEventListener("tick",y),v=!0}catch(r){c.container.on("scroll resize",y),v=!1}c.triggerPosUpdateInterval=parseInt(c.triggerPosUpdateInterval),c.triggerPosUpdateInterval>0&&t.setInterval(function(){e.each(g,function(e,t){t.updateTriggerElementPosition()})},c.triggerPosUpdateInterval)}},E=function(){return c.vertical?c.container.scrollTop():c.container.scrollLeft()},T=function(e){c.vertical?c.container.scrollTop(e):c.container.scrollLeft(e)},y=function(){if(u&&m){var t=e.isArray(u)?u:g.slice(0),r=f;f=l.scrollPos();var n=f-r;h=0===n?"PAUSED":n>0?"FORWARD":"REVERSE",0>n&&t.reverse(),e.each(t,function(e,t){t.update(!0)}),0===t.length&&c.loglevel>=3,u=!1}},S=function(e){"resize"==e.type&&(d=c.vertical?c.container.height():c.container.width()),u=!0},F=function(e){if(e.length<=1)return e;var t=e.slice(0);return t.sort(function(e,t){return e.scrollOffset()>t.scrollOffset()?1:-1}),t};return this.addScene=function(t){return e.isArray(t)?e.each(t,function(e,t){l.addScene(t)}):t.parent()!=l?t.addTo(l):-1==e.inArray(g,t)&&(g.push(t),g=F(g),t.on("shift."+s+"_sort",function(){g=F(g)}),e.each(c.globalSceneOptions,function(e,r){t[e]&&t[e].call(t,r)})),l},this.removeScene=function(t){if(e.isArray(t))e.each(t,function(e,t){l.removeScene(t)});else{var r=e.inArray(t,g);r>-1&&(t.off("shift."+s+"_sort"),g.splice(r,1),t.remove())}return l},this.updateScene=function(t,r){return e.isArray(t)?e.each(t,function(e,t){l.updateScene(t,r)}):r?t.update(!0):(e.isArray(u)||(u=[]),-1==e.inArray(t,u)&&u.push(t),u=F(u)),l},this.update=function(e){return S({type:"resize"}),e&&y(),l},this.scrollTo=function(t){if(t instanceof n)t.parent()===l?l.scrollTo(t.scrollOffset()):log(2,"scrollTo(): The supplied scene does not belong to this controller. Scroll cancelled.",t);else if("string"===e.type(t)||o(t)||t instanceof e){console.log(t);var r=e(t).first();if(r[0]){var i=r.offset();l.scrollTo(c.vertical?i.top:i.left)}else log(2,"scrollTo(): The supplied element could not be found. Scroll cancelled.",newScrollPos)}else e.isFunction(t)?T=t:T.call(c.container[0],t);return l},this.scrollPos=function(t){return arguments.length?(e.isFunction(t)&&(E=t),l):E.call(l)},this.info=function(e){var t={size:d,vertical:c.vertical,scrollPos:f,scrollDirection:h,container:c.container,isDocument:p};return arguments.length?void 0!==t[e]?t[e]:void 0:t},this.loglevel=function(e){return arguments.length?(c.loglevel!=e&&(c.loglevel=e),l):c.loglevel},this.enabled=function(e){return arguments.length?(m!=e&&(m=!!e,l.updateScene(g,!0)),l):m},this.destroy=function(e){for(t.clearTimeout(i);g.length>0;){var r=g[g.length-1];r.destroy(e)}return c.container.off("scroll resize",S),v?TweenLite.ticker.removeEventListener("tick",y):c.container.off("scroll resize",y),null},w(),l},n=function(r){var n,o,s,a,l,c,g=["onCenter","onEnter","onLeave"],u="ScrollScene",f={duration:0,offset:0,triggerElement:null,triggerHook:g[0],reverse:!0,tweenChanges:!1,loglevel:2},h=this,p=e.extend({},f,r),d="BEFORE",v=0,m={start:0,end:0},w=0,E=!0,T={unknownOptionSupplied:function(){e.each(p,function(e){f.hasOwnProperty(e)||delete p[e]})},duration:function(){p.duration=parseFloat(p.duration),(!e.isNumeric(p.duration)||p.duration<0)&&(p.duration=f.duration)},offset:function(){p.offset=parseFloat(p.offset),e.isNumeric(p.offset)||(p.offset=f.offset)},triggerElement:function(){null!==p.triggerElement&&0===e(p.triggerElement).length&&(p.triggerElement=f.triggerElement)},triggerHook:function(){e.isNumeric(p.triggerHook)||-1!=e.inArray(p.triggerHook,g)||(p.triggerHook=f.triggerHook)},loglevel:function(){},checkIfPinnedElementIsTweened:function(){if(o&&n&&p.triggerElement&&p.loglevel>=2){var t=o.getTweensOf(e(p.triggerElement)),r=n.info("vertical");e.each(t,function(e,t){var n=t.vars.css||t.vars,i=r?void 0!==n.top||void 0!==n.bottom:void 0!==n.left||void 0!==n.right;return i?!1:void 0})}}},y=function(){S(),h.on("change.internal",function(e){"loglevel"!==e.what&&"tweenChanges"!==e.what&&("triggerElement"===e.what?h.updateTriggerElementPosition():"reverse"===e.what&&h.update(),("DURING"!==d&&"duration"==e.what||"AFTER"===d&&0===p.duration)&&b())}).on("shift.internal",function(){F(),h.update()}).on("progress.internal",function(){R(),b()})},S=function(t){if(arguments.length)e.isArray(t)||(t=[t]);else{t=[];for(var r in T)t.push(r)}e.each(t,function(e,t){T[t]&&T[t]()})},F=function(){m={start:w+p.offset},n&&p.triggerElement&&(m.start-=n.info("size")*h.triggerHook()),m.end=m.start+p.duration},R=function(e){if(o){var t=e>=0&&1>=e?e:v;if(-1===o.repeat())if(("DURING"===d||"AFTER"===d&&0===p.duration)&&o.paused())o.play();else{if("DURING"===d||o.paused())return!1;o.pause()}else{if(t==o.progress())return!1;0===p.duration?"AFTER"===d?o.play():o.reverse():p.tweenChanges?o.tweenTo(t*o.duration()):o.progress(t).pause()}return!0}return!1},b=function(e){if(s&&n){var t=n.info();if(e||"DURING"!==d&&("AFTER"!==d||0!==p.duration)){var r={position:a.inFlow?"relative":"absolute",top:0,left:0},o=s.css("position")!=r.position;a.pushFollowers?"AFTER"===d&&0===parseFloat(a.spacer.css("padding-top"))?o=!0:"BEFORE"===d&&0===parseFloat(a.spacer.css("padding-bottom"))&&(o=!0):r[t.vertical?"top":"left"]=p.duration*v,s.css(r),o&&(s.removeClass(a.pinnedClass),P())}else{"fixed"!=s.css("position")&&(s.css("position","fixed"),P(),s.addClass(a.pinnedClass));var l=i(a.spacer,!0),c=p.reverse||0===p.duration?t.scrollPos-m.start:Math.round(v*p.duration*10)/10;l.top-=parseFloat(a.spacer.css("margin-top")),l[t.vertical?"top":"left"]+=c,s.css({top:l.top,left:l.left})}}},P=function(){if(s&&n&&a.inFlow){var r="AFTER"===d,i="BEFORE"===d,o="DURING"===d,l="fixed"==s.css("position"),c=n.info("vertical"),g=a.spacer.children().first(),u=e.inArray(a.spacer.css("display"),["block","flex","list-item","table","-webkit-box"])>-1,f={};u?(f["margin-top"]=i||o&&l?s.css("margin-top"):"auto",f["margin-bottom"]=r||o&&l?s.css("margin-bottom"):"auto"):f["margin-top"]=f["margin-bottom"]="auto",a.relSize.width?l?e(t).width()==a.spacer.parent().width()?s.css("width","inherit"):s.css("width",a.spacer.width()):s.css("width","100%"):(f["min-width"]=g.outerWidth(!0),f.width=l?f["min-width"]:"auto"),a.relSize.height?l?e(t).height()==a.spacer.parent().height()?s.css("height","inherit"):s.css("height",a.spacer.height()):s.css("height","100%"):(f["min-height"]=g.outerHeight(!u),f.height=l?f["min-height"]:"auto"),a.pushFollowers&&(f["padding"+(c?"Top":"Left")]=p.duration*v,f["padding"+(c?"Bottom":"Right")]=p.duration*(1-v)),a.spacer.css(f)}},C=function(){n&&s&&"DURING"===d&&!n.info("isDocument")&&b()},k=function(){n&&s&&("DURING"===d||"AFTER"===d&&0===p.duration)&&(a.relSize.width&&e(t).width()!=a.spacer.parent().width()||a.relSize.height&&e(t).height()!=a.spacer.parent().height())&&P()};return this.parent=function(){return n},this.duration=function(e){if(!arguments.length)return p.duration;if(p.duration!=e){var t="duration";p[t]=e,S(t),h.trigger("change",{what:t,newval:p[t]}),h.trigger("shift",{reason:t})}return h},this.offset=function(e){if(!arguments.length)return p.offset;if(p.offset!=e){var t="offset";p[t]=e,S(t),h.trigger("change",{what:t,newval:p[t]}),h.trigger("shift",{reason:t})}return h},this.triggerElement=function(e){if(!arguments.length)return p.triggerElement;if(p.triggerElement!=e){var t="triggerElement";p[t]=e,S(t),h.trigger("change",{what:t,newval:p[t]})}return h},this.triggerHook=function(t){if(!arguments.length){var r;if(e.isNumeric(p.triggerHook))r=p.triggerHook;else switch(p.triggerHook){case"onCenter":r=.5;break;case"onLeave":r=0;break;case"onEnter":default:r=1}return r}if(p.triggerHook!=t){var n="triggerHook";p[n]=t,S(n),h.trigger("change",{what:n,newval:p[n]}),h.trigger("shift",{reason:n})}return h},this.reverse=function(e){if(!arguments.length)return p.reverse;if(p.reverse!=e){var t="reverse";p[t]=!!e,S(t),h.trigger("change",{what:t,newval:p[t]})}return h},this.tweenChanges=function(e){if(!arguments.length)return p.tweenChanges;if(p.tweenChanges!=e){var t="tweenChanges";p[t]=!!e,S(t),h.trigger("change",{what:t,newval:p[t]})}return h},this.loglevel=function(e){if(!arguments.length)return p.loglevel;if(p.loglevel!=e){var t="loglevel";p[t]=e,S(t),h.trigger("change",{what:t,newval:p[t]})}return h},this.state=function(){return d},this.triggerPosition=function(){var e=p.offset;return n&&(e+=p.triggerElement?w:n.info("size")*h.triggerHook()),e},this.triggerOffset=function(){return h.triggerPosition()},this.scrollOffset=function(){return m.start},this.update=function(e){if(n)if(e)if(n.enabled()&&E){var t,r=n.info("scrollPos");t=p.duration>0?(r-m.start)/(m.end-m.start):r>=m.start?1:0,h.trigger("update",{startPos:m.start,endPos:m.end,scrollPos:r}),h.progress(t)}else s&&"fixed"==s.css("position")&&b(!0);else n.updateScene(h,!1);return h},this.updateTriggerElementPosition=function(t){var r=0;if(n&&p.triggerElement){for(var o=e(p.triggerElement).first(),s=n.info(),a=i(s.container),l=s.vertical?"top":"left";o.parent().data("ScrollMagicPinSpacer");)o=o.parent();var c=i(o);s.isDocument||(a[l]-=s.scrollPos),r=c[l]-a[l]}var g=r!=w;return w=r,g&&!t&&h.trigger("shift",{reason:"triggerElementPosition"}),h},this.progress=function(e){if(arguments.length){var t=!1,r=d,i=n?n.info("scrollDirection"):"PAUSED";if(0>=e&&"BEFORE"!==d&&(e>=v||p.reverse)?(v=0,d="BEFORE",t=!0):e>0&&1>e&&(e>=v||p.reverse)?(v=e,d="DURING",t=!0):e>=1&&"AFTER"!==d?(v=1,d="AFTER",t=!0):"DURING"!==d||p.reverse||b(),t){var o={progress:v,state:d,scrollDirection:i},s=d!=r,a=function(e){h.trigger(e,o)};s&&(0===p.duration?"AFTER"===d&&(a("enter"),a("start")):"DURING"!==r&&(a("enter"),a("BEFORE"===r?"start":"end"))),a("progress"),s&&(0===p.duration?"BEFORE"===d&&(a("start"),a("leave")):"DURING"!==d&&(a("AFTER"===d?"end":"start"),a("leave")))}return h}return v},this.setTween=function(e){o&&h.removeTween();try{o=new TimelineMax({smoothChildTiming:!0}).add(e).pause()}catch(t){}finally{return e.repeat&&-1===e.repeat()&&(o.repeat(-1),o.yoyo(e.yoyo())),S("checkIfPinnedElementIsTweened"),R(),h}},this.removeTween=function(e){return o&&(e&&R(0),o.kill(),o=void 0),h},this.setPin=function(r,n){var i={pushFollowers:!0,spacerClass:"scrollmagic-pin-spacer",pinnedClass:""};if(n=e.extend({},i,n),r=e(r).first(),0===r.length)return h;if("fixed"==r.css("position"))return h;if(s){if(s===r)return h;h.removePin()}s=r,s.parent().hide();var o="absolute"!=s.css("position"),l=s.css(["display","top","left","bottom","right"]),c=s.css(["width","height"]);s.parent().show();var g=e("<div></div>").addClass(n.spacerClass).css(l).data("ScrollMagicPinSpacer",!0).css({position:o?"relative":"absolute","margin-left":"auto","margin-right":"auto","box-sizing":"content-box","-moz-box-sizing":"content-box","-webkit-box-sizing":"content-box"});!o&&n.pushFollowers&&(n.pushFollowers=!1);var f=s[0].style;return a={spacer:g,relSize:{width:"%"===c.width.slice(-1),height:"%"===c.height.slice(-1)},pushFollowers:n.pushFollowers,inFlow:o,origStyle:{position:f.position||"",top:f.position||"",left:f.position||"",bottom:f.position||"",right:f.position||""},pinnedClass:n.pinnedClass},a.relSize.width&&g.css("width",c.width),a.relSize.height&&g.css("height",c.height),s.before(g).appendTo(g).css({position:o?"relative":"absolute",top:"auto",left:"auto",bottom:"auto",right:"auto"}),e(t).on("scroll."+u+"_pin resize."+u+"_pin",C),b(),h},this.removePin=function(r){return s&&(r||!n?(s.insertBefore(a.spacer).css(a.origStyle),a.spacer.remove()):"DURING"===d&&b(!0),e(t).off("scroll."+u+"_pin resize."+u+"_pin"),s=void 0),h},this.setClassToggle=function(t,r){var n=e(t);return 0===n.length||"string"!==e.type(r)?h:(l=r,c=n,h.on("enter.internal_class leave.internal_class",function(e){c.toggleClass(l,"enter"===e.type)}),h)},this.removeClassToggle=function(e){return e&&c.removeClass(l),h.off("start.internal_class end.internal_class"),l=void 0,c=void 0,h},this.addTo=function(e){return n!=e?(n&&n.removeScene(h),n=e,S(),h.updateTriggerElementPosition(!0),F(),P(),n.info("container").on("resize."+u,function(){k(),h.triggerHook()>0&&h.trigger("shift",{reason:"containerSize"})}),e.addScene(h),h.update(),h):void 0},this.enabled=function(e){return arguments.length?(E!=e&&(E=!!e,h.update(!0)),h):E},this.remove=function(){if(n){n.info("container").off("resize."+u);var e=n;n=void 0,e.removeScene(h)}return h},this.destroy=function(e){return this.removeTween(e),this.removePin(e),this.removeClassToggle(e),this.remove(),this.off("start end enter leave progress change update shift shift.internal change.internal progress.internal"),null},this.on=function(t,r){if(e.isFunction(r)){var n=e.trim(t).toLowerCase().replace(/(\w+)\.(\w+)/g,"$1."+u+"_$2").replace(/( |^)(\w+)( |$)/g,"$1$2."+u+"$3");e(h).on(n,r)}return h},this.off=function(t,r){var n=e.trim(t).toLowerCase().replace(/(\w+)\.(\w+)/g,"$1."+u+"_$2").replace(/( |^)(\w+)( |$)/g,"$1$2."+u+"$3");return e(h).off(n,r),h},this.trigger=function(t,r){var n={type:e.trim(t).toLowerCase(),target:h};return e.isPlainObject(r)&&(n=e.extend({},r,n)),e(h).trigger(n),h},y(),h};r.version="1.1.0-alpha",t.ScrollScene=n,t.ScrollMagic=r;var i=function(t,r){var n={top:0,left:0},i=t[0];if(i)if(i.getBoundingClientRect){var o=i.getBoundingClientRect();n.top=o.top,n.left=o.left,r||(n.top+=e(document).scrollTop(),n.left+=e(document).scrollLeft())}else n=t.offset()||n,r&&(n.top-=e(document).scrollTop(),n.left-=e(document).scrollLeft());return n},o=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}}(jQuery,window);