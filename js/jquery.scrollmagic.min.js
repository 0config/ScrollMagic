/* ScrollMagic v1.1.0 | (c) 2014 Jan Paepke (@janpaepke) | license & info: http://janpaepke.github.io/ScrollMagic */
!function(e,t){"use strict";var r=function(r){var i,o="ScrollMagic",a={container:t,vertical:!0,globalSceneOptions:{},loglevel:2,triggerPosUpdateInterval:100},l=this,c=e.extend({},a,r),g=[],u=!1,d=0,f="PAUSED",h=!0,p=0,v=!1,m=!0,w=function(){if(e.each(c,function(e){a.hasOwnProperty(e)||(b(2,'WARNING: Unknown option "'+e+'"'),delete c[e])}),c.container=e(c.container).first(),0===c.container.length)return void b(1,"ERROR creating object "+o+": No valid scroll container supplied");h=!e.contains(document,c.container.get(0)),p=c.vertical?c.container.height():c.container.width(),c.container.on("scroll resize",S);try{TweenLite.ticker.addEventListener("tick",y),v=!0}catch(r){c.container.on("scroll resize",y),v=!1}c.triggerPosUpdateInterval=parseInt(c.triggerPosUpdateInterval),c.triggerPosUpdateInterval>0&&t.setInterval(function(){e.each(g,function(e,t){t.updateTriggerElementPosition()})},c.triggerPosUpdateInterval),b(3,"added new "+o+" controller")},R=function(){return c.vertical?c.container.scrollTop():c.container.scrollLeft()},E=function(e){c.vertical?c.container.scrollTop(e):c.container.scrollLeft(e)},y=function(){if(u&&m){var t=e.isArray(u)?u:g,r=d;d=l.scrollPos();var n=d-r;f=0===n?"PAUSED":n>0?"FORWARD":"REVERSE",l.updateScene(t,!0),0===t.length&&c.loglevel>=3&&b(3,"updating 0 Scenes (nothing added to controller)"),u=!1}},S=function(e){"resize"==e.type&&(p=c.vertical?c.container.height():c.container.width()),u=!0},b=function(e){if(c.loglevel>=e){var r="("+o+") ->",n=Array.prototype.splice.call(arguments,1),i=Function.prototype.bind.call(s,t);n.unshift(e,r),i.apply(t,n)}};return this.addScene=function(t){return e.isArray(t)?e.each(t,function(e,t){l.addScene(t)}):t.parent()!=l?t.addTo(l):-1==e.inArray(g,t)&&(g.push(t),e.each(c.globalSceneOptions,function(e,r){t[e]&&t[e].call(t,r)}),b(3,"added Scene ("+g.length+" total)")),l},this.removeScene=function(t){if(e.isArray(t))e.each(t,function(e,t){l.removeScene(t)});else{var r=e.inArray(t,g);r>-1&&(g.splice(r,1),t.remove(),b(3,"removed Scene ("+g.length+" total)"))}return l},this.updateScene=function(t,r){return e.isArray(t)?e.each(t,function(e,n){b(3,"updating Scene "+(e+1)+"/"+t.length+" ("+g.length+" total)"),l.updateScene(n,r)}):r?t.update(!0):(e.isArray(u)||(u=[]),-1==e.inArray(t,u)&&u.push(t)),l},this.update=function(e){return S({type:"resize"}),e&&y(),l},this.scrollTo=function(t){return t instanceof n?t.parent()===l?l.scrollTo(t.scrollOffset()):b(1,"The supplied scene does not belong to this controller."):e.isFunction(t)?E=t:E.call(c.container[0],t),l},this.scrollPos=function(t){return arguments.length?(e.isFunction(t)?R=t:b(2,"Provided value for method 'scrollPos' is not a function. To change the current scroll position use 'scrollTo()'."),l):R.call(l)},this.info=function(e){var t={size:p,vertical:c.vertical,scrollPos:d,scrollDirection:f,container:c.container,isDocument:h};return arguments.length?void 0!==t[e]?t[e]:void b(1,'ERROR: option "'+e+'" is not available'):t},this.loglevel=function(e){return arguments.length?(c.loglevel!=e&&(c.loglevel=e),l):c.loglevel},this.enabled=function(e){return arguments.length?(m!=e&&(m=!!e,l.updateScene(g,!0)),l):m},this.destroy=function(e){for(t.clearTimeout(i);g.length>0;){var r=g[g.length-1];r.destroy(e)}return c.container.off("scroll resize",S),v?TweenLite.ticker.removeEventListener("tick",y):c.container.off("scroll resize",y),b(3,"destroyed "+o+" (reset: "+(e?"true":"false")+")"),null},w(),l},n=function(r){var n,i,o,l,c=["onCenter","onEnter","onLeave"],g="ScrollScene",u={duration:0,offset:0,triggerElement:null,triggerHook:c[0],reverse:!0,tweenChanges:!1,loglevel:2},d=this,f=e.extend({},u,r),h="BEFORE",p=0,v={start:0,end:0},m=0,w=!0,R=function(){y(),d.on("change.internal",function(e){y(),"loglevel"!==e.what&&"tweenChanges"!==e.what&&("triggerElement"===e.what&&d.updateTriggerElementPosition(),("offset"===e.what||"duration"===e.what||"triggerHook"===e.what)&&S(),d.update(),("DURING"!==h&&"duration"==e.what||"AFTER"===h&&0===f.duration)&&F())}),d.on("progress.internal",function(){b(),F()})},E=function(e){if(f.loglevel>=e){var r="("+g+") ->",n=Array.prototype.splice.call(arguments,1),i=Function.prototype.bind.call(s,t);n.unshift(e,r),i.apply(t,n)}},y=function(){if(e.each(f,function(e){u.hasOwnProperty(e)||(E(2,'WARNING: Unknown option "'+e+'"'),delete f[e])}),f.duration=parseFloat(f.duration),(!e.isNumeric(f.duration)||f.duration<0)&&(E(1,'ERROR: Invalid value for option "duration":',f.duration),f.duration=u.duration),f.offset=parseFloat(f.offset),e.isNumeric(f.offset)||(E(1,'ERROR: Invalid value for option "offset":',f.offset),f.offset=u.offset),null!==f.triggerElement&&0===e(f.triggerElement).length&&(E(1,'ERROR: Element defined in option "triggerElement" was not found:',f.triggerElement),f.triggerElement=u.triggerElement),e.isNumeric(f.triggerHook)||-1!=e.inArray(f.triggerHook,c)||(E(1,'ERROR: Invalid value for option "triggerHook": ',f.triggerHook),f.triggerHook=u.triggerHook),!e.isNumeric(f.loglevel)||f.loglevel<0||f.loglevel>3){var t=f.loglevel;f.loglevel=u.loglevel,E(1,'ERROR: Invalid value for option "loglevel":',t)}if(i&&n&&f.triggerElement&&f.loglevel>=2){var r=i.getTweensOf(e(f.triggerElement)),o=n.info("vertical");e.each(r,function(e,t){var r=t.vars.css||t.vars,n=o?void 0!==r.top||void 0!==r.bottom:void 0!==r.left||void 0!==r.right;return n?(E(2,"WARNING: Tweening the position of the trigger element affects the scene timing and should be avoided!"),!1):void 0})}},S=function(){v={start:m+f.offset},n&&f.triggerElement&&(v.start-=n.info("size")*d.triggerHook()),v.end=v.start+f.duration},b=function(e){if(i){var t=e>=0&&1>=e?e:p;if(-1===i.repeat())if(("DURING"===h||"AFTER"===h&&0===f.duration)&&i.paused())i.play();else{if("DURING"===h||i.paused())return!1;i.pause()}else{if(t==i.progress())return!1;0===f.duration?"AFTER"===h?i.play():i.reverse():f.tweenChanges?i.tweenTo(t*i.duration()):i.progress(t).pause()}return!0}return!1},F=function(e){if(o&&n){var t=n.info();if(e||"DURING"!==h&&("AFTER"!==h||0!==f.duration)){var r={position:l.inFlow?"relative":"absolute",top:0,left:0},i=o.css("position")!=r.position;l.pushFollowers?"AFTER"===h&&0===parseFloat(l.spacer.css("padding-top"))?i=!0:"BEFORE"===h&&0===parseFloat(l.spacer.css("padding-bottom"))&&(i=!0):r[t.vertical?"top":"left"]=f.duration*p,o.css(r),i&&(o.removeClass(l.pinnedClass),T())}else{"fixed"!=o.css("position")&&(o.css("position","fixed"),T(),o.addClass(l.pinnedClass));var s=a(l.spacer,!0),c=f.reverse||0===f.duration?t.scrollPos-v.start:Math.round(p*f.duration*10)/10;s.top-=parseFloat(l.spacer.css("margin-top")),s[t.vertical?"top":"left"]+=c,o.css({top:s.top,left:s.left})}}},T=function(){if(o&&n&&l.inFlow){var r="AFTER"===h,i="BEFORE"===h,s="DURING"===h,a="fixed"==o.css("position"),c=n.info("vertical"),g=l.spacer.children().first(),u=e.inArray(l.spacer.css("display"),["block","flex","list-item","table","-webkit-box"])>-1,d={};u?(d["margin-top"]=i||s&&a?o.css("margin-top"):"auto",d["margin-bottom"]=r||s&&a?o.css("margin-bottom"):"auto"):d["margin-top"]=d["margin-bottom"]="auto",l.relSize.width?a?e(t).width()==l.spacer.parent().width()?o.css("width","inherit"):o.css("width",l.spacer.width()):o.css("width","100%"):(d["min-width"]=g.outerWidth(!0),d.width=a?d["min-width"]:"auto"),l.relSize.height?a?e(t).height()==l.spacer.parent().height()?o.css("height","inherit"):o.css("height",l.spacer.height()):o.css("height","100%"):(d["min-height"]=g.outerHeight(!u),d.height=a?d["min-height"]:"auto"),l.pushFollowers&&(d["padding"+(c?"Top":"Left")]=f.duration*p,d["padding"+(c?"Bottom":"Right")]=f.duration*(1-p)),l.spacer.css(d)}},P=function(){n&&o&&"DURING"===h&&!n.info("isDocument")&&F()},A=function(){n&&o&&("DURING"===h||"AFTER"===h&&0===f.duration)&&(l.relSize.width&&e(t).width()!=l.spacer.parent().width()||l.relSize.height&&e(t).height()!=l.spacer.parent().height())&&T()};return this.parent=function(){return n},this.duration=function(e){return arguments.length?(f.duration!=e&&(f.duration=e,d.trigger("change",{what:"duration",newval:e})),d):f.duration},this.offset=function(e){return arguments.length?(f.offset!=e&&(f.offset=e,d.trigger("change",{what:"offset",newval:e})),d):f.offset},this.triggerElement=function(e){return arguments.length?(f.triggerElement!=e&&(f.triggerElement=e,d.trigger("change",{what:"triggerElement",newval:e})),d):f.triggerElement},this.triggerHook=function(t){if(!arguments.length){var r;if(e.isNumeric(f.triggerHook))r=f.triggerHook;else switch(f.triggerHook){case"onCenter":r=.5;break;case"onLeave":r=0;break;case"onEnter":default:r=1}return r}return f.triggerHook!=t&&(f.triggerHook=t,d.trigger("change",{what:"triggerHook",newval:t})),d},this.reverse=function(e){return arguments.length?(f.reverse!=e&&(f.reverse=e,d.trigger("change",{what:"reverse",newval:e})),d):f.reverse},this.tweenChanges=function(e){return arguments.length?(f.tweenChanges!=e&&(f.tweenChanges=e,d.trigger("change",{what:"tweenChanges",newval:e})),d):f.tweenChanges},this.loglevel=function(e){return arguments.length?(f.loglevel!=e&&(f.loglevel=e,d.trigger("change",{what:"loglevel",newval:e})),d):f.loglevel},this.state=function(){return h},this.triggerOffset=function(){var e=f.offset;return n&&(e+=f.triggerElement?m:n.info("size")*d.triggerHook()),e},this.scrollOffset=function(){return v.start},this.update=function(e){if(n)if(e)if(n.enabled()&&w){var t,r=n.info("scrollPos");t=f.duration>0?(r-v.start)/(v.end-v.start):r>=v.start?1:0,d.trigger("update",{startPos:v.start,endPos:v.end,scrollPos:r}),d.progress(t)}else o&&"fixed"==o.css("position")&&F(!0);else n.updateScene(d,!1);return d},this.updateTriggerElementPosition=function(){var t=0;if(n&&f.triggerElement){for(var r=e(f.triggerElement).first(),i=n.info(),o=a(i.container),s=i.vertical?"top":"left";r.parent().data("ScrollMagicPinSpacer");)r=r.parent();var l=a(r);i.isDocument||(o[s]-=i.scrollPos),t=l[s]-o[s]}var c=t!=m;return m=t,c&&(S(),d.update()),d},this.progress=function(e){if(arguments.length){var t=!1,r=h,i=n?n.info("scrollDirection"):"PAUSED";if(0>=e&&"BEFORE"!==h&&(e>=p||f.reverse)?(p=0,h="BEFORE",t=!0):e>0&&1>e&&(e>=p||f.reverse)?(p=e,h="DURING",t=!0):e>=1&&"AFTER"!==h?(p=1,h="AFTER",t=!0):"DURING"!==h||f.reverse||F(),t){var o={progress:p,state:h,scrollDirection:i},s=h!=r,a="BEFORE"===h&&0===f.duration;s&&(("DURING"===h||0===f.duration)&&d.trigger("enter",o),("BEFORE"===h||"BEFORE"===r)&&d.trigger(a?"end":"start",o)),d.trigger("progress",o),s&&(("AFTER"===h||"AFTER"===r)&&d.trigger(a?"start":"end",o),("DURING"!==h||0===f.duration)&&d.trigger("leave",o))}return d}return p},this.setTween=function(e){i&&d.removeTween();try{i=new TimelineMax({smoothChildTiming:!0}).add(e).pause()}catch(t){E(1,"ERROR calling method 'setTween()': Supplied argument is not a valid TweenMaxObject")}finally{return e.repeat&&-1===e.repeat()&&(i.repeat(-1),i.yoyo(e.yoyo())),y(),E(3,"added tween"),b(),d}},this.removeTween=function(e){return i&&(e&&b(0),i.kill(),i=void 0,E(3,"removed tween (reset: "+(e?"true":"false")+")")),d},this.setPin=function(r,n){var i={pushFollowers:!0,spacerClass:"scrollmagic-pin-spacer",pinnedClass:""};if(n=e.extend({},i,n),r=e(r).first(),0===r.length)return E(1,"ERROR calling method 'setPin()': Invalid pin element supplied."),d;if("fixed"==r.css("position"))return E(1,"ERROR: Pin does not work with elements that are positioned 'fixed'."),d;if(o){if(o===r)return d;d.removePin()}o=r,o.parent().hide();var s="absolute"!=o.css("position"),a=o.css(["display","top","left","bottom","right"]),c=o.css(["width","height"]);o.parent().show();var g=e("<div></div>").addClass(n.spacerClass).css(a).data("ScrollMagicPinSpacer",!0).css({position:s?"relative":"absolute","margin-left":"auto","margin-right":"auto","box-sizing":"content-box","-moz-box-sizing":"content-box","-webkit-box-sizing":"content-box"});return!s&&n.pushFollowers&&(E(2,"WARNING: If the pinned element is positioned absolutely pushFollowers is disabled."),n.pushFollowers=!1),l={spacer:g,relSize:{width:"%"===c.width.slice(-1),height:"%"===c.height.slice(-1)},pushFollowers:n.pushFollowers,inFlow:s,origStyle:o.attr("style"),pinnedClass:n.pinnedClass},l.relSize.width&&g.css("width",c.width),l.relSize.height&&g.css("height",c.height),o.before(g).appendTo(g).css({position:s?"relative":"absolute",top:"auto",left:"auto",bottom:"auto",right:"auto"}),e(t).on("scroll resize",P),E(3,"added pin"),F(),d},this.removePin=function(r){return o&&(r||!n?(o.insertBefore(l.spacer).attr("style",l.origStyle),l.spacer.remove()):"DURING"===h&&F(!0),e(t).off("scroll resize",P),o=void 0,E(3,"removed pin (reset: "+(r?"true":"false")+")")),d},this.addTo=function(e){return n!=e?(n&&n.removeScene(d),n=e,y(),d.updateTriggerElementPosition(),S(),T(),n.info("container").on("resize",A),n.info("container").on("resize",S),E(3,"added "+g+" to controller"),e.addScene(d),d.update(),d):void 0},this.enabled=function(e){return arguments.length?(w!=e&&(w=!!e,d.update(!0)),d):w},this.remove=function(){if(n){n.info("container").off("resize",A),n.info("container").off("resize",S);var e=n;n=void 0,E(3,"removed "+g+" from controller"),e.removeScene(d)}return d},this.destroy=function(e){return this.removeTween(e),this.removePin(e),this.remove(),this.off("start end enter leave progress change update change.internal progress.internal"),E(3,"destroyed "+g+" (reset: "+(e?"true":"false")+")"),null},this.on=function(t,r){if(e.isFunction(r)){var n=e.trim(t).toLowerCase().replace(/(\w+)\.(\w+)/g,"$1."+g+"_$2").replace(/( |^)(\w+)( |$)/g,"$1$2."+g+"$3");e(d).on(n,r)}else E(1,"ERROR calling method 'on()': Supplied argument is not a valid callback!");return d},this.off=function(t,r){var n=e.trim(t).toLowerCase().replace(/(\w+)\.(\w+)/g,"$1."+g+"_$2").replace(/( |^)(\w+)( |$)/g,"$1$2."+g+"$3");return e(d).off(n,r),d},this.trigger=function(t,r){E(3,"event fired:",t,"->",r);var n={type:e.trim(t).toLowerCase(),target:d};return e.isPlainObject(r)&&(n=e.extend({},r,n)),e(d).trigger(n),d},R(),d};t.ScrollScene=n,t.ScrollMagic=r;var i=t.console=t.console||{},o=["error","warn","log"];i.log||(i.log=e.noop),e.each(o,function(e,t){i[t]||(i[t]=i.log)});var s=function(e){(e>o.length||0>=e)&&(e=o.length);var t=new Date,r=("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)+":"+("00"+t.getMilliseconds()).slice(-3),n=o[e-1],s=Array.prototype.splice.call(arguments,1),a=Function.prototype.bind.call(i[n],i);s.unshift(r),a.apply(i,s)},a=function(t,r){var n={top:0,left:0},i=t[0];if(i)if(i.getBoundingClientRect){var o=i.getBoundingClientRect();n.top=o.top,n.left=o.left,r||(n.top+=e(document).scrollTop(),n.left+=e(document).scrollLeft())}else n=t.offset()||n,r&&(n.top-=e(document).scrollTop(),n.left-=e(document).scrollLeft());return n}}(jQuery,window);