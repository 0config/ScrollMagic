/* ScrollMagic v1.1.0-alpha | (c) 2014 Jan Paepke (@janpaepke) | license & info: http://janpaepke.github.io/ScrollMagic */
!function(e,t){"use strict";var n=function(n){var i,s="ScrollMagic",a={container:t,vertical:!0,globalSceneOptions:{},loglevel:2,sceneRefreshInterval:100},l=this,c=e.extend({},a,n),u=[],f=!1,g=0,h="PAUSED",d=!0,p=0,v=!1,m=!0,w=function(){if(e.each(c,function(e){a.hasOwnProperty(e)||delete c[e]}),c.container=e(c.container).first(),0!==c.container.length){d=!e.contains(document,c.container.get(0)),p=c.vertical?c.container.height():c.container.width(),c.container.on("scroll resize",F);try{TweenLite.ticker.addEventListener("tick",y),v=!0}catch(n){c.container.on("scroll resize",y),v=!1}c.sceneRefreshInterval=parseInt(c.sceneRefreshInterval),c.sceneRefreshInterval>0&&(i=t.setInterval(function(){e.each(u,function(e,t){t.refresh()})},c.sceneRefreshInterval))}},E=function(){return c.vertical?c.container.scrollTop():c.container.scrollLeft()},S=function(e){c.vertical?c.container.scrollTop(e):c.container.scrollLeft(e)},y=function(){if(f&&m){var t=e.isArray(f)?f:u.slice(0),n=g;g=l.scrollPos();var r=g-n;h=0===r?"PAUSED":r>0?"FORWARD":"REVERSE",0>r&&t.reverse(),e.each(t,function(e,t){t.update(!0)}),0===t.length&&c.loglevel>=3,f=!1}},F=function(e){"resize"==e.type&&(p=c.vertical?c.container.height():c.container.width()),f=!0},R=function(e){if(e.length<=1)return e;var t=e.slice(0);return t.sort(function(e,t){return e.scrollOffset()>t.scrollOffset()?1:-1}),t};return this.addScene=function(t){return e.isArray(t)?e.each(t,function(e,t){l.addScene(t)}):t instanceof r&&(t.parent()!=l?t.addTo(l):-1==e.inArray(u,t)&&(u.push(t),u=R(u),t.on("shift."+s+"_sort",function(){u=R(u)}),e.each(c.globalSceneOptions,function(e,n){t[e]&&t[e].call(t,n)}))),l},this.removeScene=function(t){if(e.isArray(t))e.each(t,function(e,t){l.removeScene(t)});else{var n=e.inArray(t,u);n>-1&&(t.off("shift."+s+"_sort"),u.splice(n,1),t.remove())}return l},this.updateScene=function(t,n){return e.isArray(t)?e.each(t,function(e,t){l.updateScene(t,n)}):n?t.update(!0):(e.isArray(f)||(f=[]),-1==e.inArray(t,f)&&f.push(t),f=R(f)),l},this.update=function(e){return F({type:"resize"}),e&&y(),l},this.scrollTo=function(t){if(t instanceof r)t.parent()===l?l.scrollTo(t.scrollOffset()):log(2,"scrollTo(): The supplied scene does not belong to this controller. Scroll cancelled.",t);else if("string"===e.type(t)||o(t)||t instanceof e){var n=e(t).first();if(n[0]){var i=n.offset();l.scrollTo(c.vertical?i.top:i.left)}else log(2,"scrollTo(): The supplied element could not be found. Scroll cancelled.",t)}else e.isFunction(t)?S=t:S.call(c.container[0],t);return l},this.scrollPos=function(t){return arguments.length?(e.isFunction(t)&&(E=t),l):E.call(l)},this.info=function(e){var t={size:p,vertical:c.vertical,scrollPos:g,scrollDirection:h,container:c.container,isDocument:d};return arguments.length?void 0!==t[e]?t[e]:void 0:t},this.loglevel=function(e){return arguments.length?(c.loglevel!=e&&(c.loglevel=e),l):c.loglevel},this.enabled=function(e){return arguments.length?(m!=e&&(m=!!e,l.updateScene(u,!0)),l):m},this.destroy=function(e){t.clearTimeout(i);for(var n=u.length;n--;)u[n].destroy(e);return c.container.off("scroll resize",F),v?TweenLite.ticker.removeEventListener("tick",y):c.container.off("scroll resize",y),null},w(),l},r=function(n){var r,o,a,l,c,u,f,g={onCenter:.5,onEnter:1,onLeave:0},h="ScrollScene",d={duration:0,offset:0,triggerElement:null,triggerHook:"onCenter",reverse:!0,tweenChanges:!1,loglevel:2},p=this,v=e.extend({},d,n),m="BEFORE",w=0,E={start:0,end:0},S=0,y=!0,F={unknownOptionSupplied:function(){e.each(v,function(e){d.hasOwnProperty(e)||delete v[e]})},duration:function(){if(e.isFunction(v.duration)){r=v.duration;try{v.duration=parseFloat(r())}catch(t){r=void 0,v.duration=d.duration}}else v.duration=parseFloat(v.duration),(!e.isNumeric(v.duration)||v.duration<0)&&(v.duration=d.duration)},offset:function(){v.offset=parseFloat(v.offset),e.isNumeric(v.offset)||(v.offset=d.offset)},triggerElement:function(){null!==v.triggerElement&&0===e(v.triggerElement).length&&(v.triggerElement=d.triggerElement)},triggerHook:function(){v.triggerHook in g||(v.triggerHook=e.isNumeric(v.triggerHook)?parseFloat(v.triggerHook):d.triggerHook)},reverse:function(){v.reverse=!!v.reverse},tweenChanges:function(){v.tweenChanges=!!v.tweenChanges}},R=function(){T(),p.on("change.internal",function(e){"loglevel"!==e.what&&"tweenChanges"!==e.what&&("triggerElement"===e.what?z():"reverse"===e.what&&p.update())}).on("shift.internal",function(e){C(),p.update(),("AFTER"===m&&"duration"===e.reason||"DURING"===m&&0===v.duration)&&P()}).on("progress.internal",function(){I(),P()}).on("destroy",function(e){e.preventDefault()})},T=function(t){if(arguments.length)e.isArray(t)||(t=[t]);else{t=[];for(var n in F)t.push(n)}e.each(t,function(e,t){F[t]&&F[t]()})},b=function(e,t){var n=!1,r=v[e];return v[e]!=t&&(v[e]=t,T(e),n=r!=v[e]),n},C=function(){E={start:S+v.offset},o&&v.triggerElement&&(E.start-=o.info("size")*p.triggerHook()),E.end=E.start+v.duration},D=function(e){if(r){var t="duration";b(t,r())&&!e&&(p.trigger("change",{what:t,newval:v[t]}),p.trigger("shift",{reason:t}))}},z=function(t){var n=0;if(o&&v.triggerElement){for(var r=e(v.triggerElement).first(),s=o.info(),a=i(s.container),l=s.vertical?"top":"left";r.parent().data("ScrollMagicPinSpacer");)r=r.parent();var c=i(r);s.isDocument||(a[l]-=s.scrollPos),n=c[l]-a[l]}var u=n!=S;S=n,u&&!t&&p.trigger("shift",{reason:"triggerElementPosition"})},I=function(e){if(a){var t=e>=0&&1>=e?e:w;if(-1===a.repeat())if("DURING"===m&&a.paused())a.play();else{if("DURING"===m||a.paused())return!1;a.pause()}else{if(t==a.progress())return!1;0===v.duration?"DURING"===m?a.play():a.reverse():v.tweenChanges?a.tweenTo(t*a.duration()):a.progress(t).pause()}return!0}return!1},P=function(e){if(l&&o){var t=o.info();if(e||"DURING"!==m){var n={position:c.inFlow?"relative":"absolute",top:0,left:0},r=l.css("position")!=n.position;c.pushFollowers?v.duration>0&&("AFTER"===m&&0===parseFloat(c.spacer.css("padding-top"))?r=!0:"BEFORE"===m&&0===parseFloat(c.spacer.css("padding-bottom"))&&(r=!0)):n[t.vertical?"top":"left"]=v.duration*w,l.css(n),r&&(l.removeClass(c.pinnedClass),k())}else{"fixed"!=l.css("position")&&(l.css("position","fixed"),k(),l.addClass(c.pinnedClass));var s=i(c.spacer,!0),a=v.reverse||0===v.duration?t.scrollPos-E.start:Math.round(w*v.duration*10)/10;s.top-=parseFloat(c.spacer.css("margin-top")),s[t.vertical?"top":"left"]+=a,l.css({top:s.top,left:s.left})}}},k=function(){if(l&&o&&c.inFlow){var n="AFTER"===m,r="BEFORE"===m,i="DURING"===m,a="fixed"==l.css("position"),u=o.info("vertical"),f=c.spacer.children().first(),g=s(c.spacer.css("display")),h={};g?(h["margin-top"]=r||i&&a?l.css("margin-top"):"auto",h["margin-bottom"]=n||i&&a?l.css("margin-bottom"):"auto"):h["margin-top"]=h["margin-bottom"]="auto",c.relSize.width||c.relSize.autoFullWidth?a?e(t).width()==c.spacer.parent().width()?l.css("width",c.relSize.autoFullWidth?"100%":"inherit"):l.css("width",c.spacer.width()):l.css("width","100%"):(h["min-width"]=f.outerWidth(!f.is(l)),h.width=a?h["min-width"]:"auto"),c.relSize.height?a?e(t).height()==c.spacer.parent().height()?l.css("height","inherit"):l.css("height",c.spacer.height()):l.css("height","100%"):(h["min-height"]=f.outerHeight(!g),h.height=a?h["min-height"]:"auto"),c.pushFollowers&&(h["padding"+(u?"Top":"Left")]=v.duration*w,h["padding"+(u?"Bottom":"Right")]=v.duration*(1-w)),c.spacer.css(h)}},O=function(){o&&l&&"DURING"===m&&!o.info("isDocument")&&P()},x=function(){o&&l&&"DURING"===m&&((c.relSize.width||c.relSize.autoFullWidth)&&e(t).width()!=c.spacer.parent().width()||c.relSize.height&&e(t).height()!=c.spacer.parent().height())&&k()},N=function(e){o&&l&&"DURING"===m&&o.scrollTo(o.info("scrollPos")-(e.originalEvent.wheelDelta/3||30*-e.originalEvent.detail))};return this.parent=function(){return o},this.duration=function(t){var n="duration";return arguments.length?(e.isFunction(t)||(r=void 0),b(n,t)&&(p.trigger("change",{what:n,newval:v[n]}),p.trigger("shift",{reason:n})),p):v[n]},this.offset=function(e){var t="offset";return arguments.length?(b(t,e)&&(p.trigger("change",{what:t,newval:v[t]}),p.trigger("shift",{reason:t})),p):v[t]},this.triggerElement=function(e){var t="triggerElement";return arguments.length?(b(t,e)&&p.trigger("change",{what:t,newval:v[t]}),p):v[t]},this.triggerHook=function(t){var n="triggerHook";return arguments.length?(b(n,t)&&(p.trigger("change",{what:n,newval:v[n]}),p.trigger("shift",{reason:n})),p):e.isNumeric(v[n])?v[n]:g[v[n]]},this.reverse=function(e){var t="reverse";return arguments.length?(b(t,e)&&p.trigger("change",{what:t,newval:v[t]}),p):v[t]},this.tweenChanges=function(e){var t="tweenChanges";return arguments.length?(b(t,e)&&p.trigger("change",{what:t,newval:v[t]}),p):v[t]},this.loglevel=function(e){var t="loglevel";return arguments.length?(b(t,e)&&p.trigger("change",{what:t,newval:v[t]}),p):v[t]},this.state=function(){return m},this.triggerPosition=function(){var e=v.offset;return o&&(e+=v.triggerElement?S:o.info("size")*p.triggerHook()),e},this.triggerOffset=function(){return p.triggerPosition()},this.scrollOffset=function(){return E.start},this.update=function(e){if(o)if(e)if(o.enabled()&&y){var t,n=o.info("scrollPos");t=v.duration>0?(n-E.start)/(E.end-E.start):n>=E.start?1:0,p.trigger("update",{startPos:E.start,endPos:E.end,scrollPos:n}),p.progress(t)}else l&&"fixed"==l.css("position")&&P(!0);else o.updateScene(p,!1);return p},this.refresh=function(){return D(),z(),p},this.progress=function(e){if(arguments.length){var t=!1,n=m,r=o?o.info("scrollDirection"):"PAUSED",i=v.reverse||e>=w;if(0===v.duration?(t=w!=e,w=1>e&&i?0:1,m=0===w?"BEFORE":"DURING"):0>=e&&"BEFORE"!==m&&i?(w=0,m="BEFORE",t=!0):e>0&&1>e&&i?(w=e,m="DURING",t=!0):e>=1&&"AFTER"!==m?(w=1,m="AFTER",t=!0):"DURING"!==m||i||P(),t){var s={progress:w,state:m,scrollDirection:r},a=m!=n,l=function(e){p.trigger(e,s)};a&&"DURING"!==n&&(l("enter"),l("BEFORE"===n?"start":"end")),l("progress"),a&&"DURING"!==m&&(l("BEFORE"===m?"start":"end"),l("leave"))}return p}return w},this.setTween=function(e){a&&p.removeTween();try{a=new TimelineMax({smoothChildTiming:!0}).add(e).pause()}catch(t){}finally{return e.repeat&&-1===e.repeat()&&(a.repeat(-1),a.yoyo(e.yoyo())),T("checkIfTriggerElementIsTweened"),I(),p}},this.removeTween=function(e){return a&&(e&&I(0),a.kill(),a=void 0),p},this.setPin=function(n,r){var i={pushFollowers:!0,spacerClass:"scrollmagic-pin-spacer",pinnedClass:""};if(r=e.extend({},i,r),n=e(n).first(),0===n.length)return p;if("fixed"==n.css("position"))return p;if(l){if(l===n)return p;p.removePin()}l=n,l.parent().hide();var o="absolute"!=l.css("position"),a=l.css(["display","top","left","bottom","right"]),u=l.css(["width","height"]);l.parent().show(),"0px"===u.width&&o&&s(a.display),!o&&r.pushFollowers&&(r.pushFollowers=!1);var f=e("<div></div>").addClass(r.spacerClass).css(a).data("ScrollMagicPinSpacer",!0).css({position:o?"relative":"absolute","margin-left":"auto","margin-right":"auto","box-sizing":"content-box","-moz-box-sizing":"content-box","-webkit-box-sizing":"content-box"}),g=l[0].style;return c={spacer:f,relSize:{width:"%"===u.width.slice(-1),height:"%"===u.height.slice(-1),autoFullWidth:"0px"===u.width&&o&&s(a.display)},pushFollowers:r.pushFollowers,inFlow:o,origStyle:{width:g.width||"",position:g.position||"",top:g.position||"",left:g.position||"",bottom:g.position||"",right:g.position||""},pinnedClass:r.pinnedClass},c.relSize.width&&f.css("width",u.width),c.relSize.height&&f.css("height",u.height),l.before(f).appendTo(f).css({position:o?"relative":"absolute",top:"auto",left:"auto",bottom:"auto",right:"auto"}),e(t).on("scroll."+h+"_pin resize."+h+"_pin",O),l.on("mousewheel DOMMouseScroll",N),P(),p},this.removePin=function(n){return l&&(n||!o?(l.insertBefore(c.spacer).css(c.origStyle),c.spacer.remove()):"DURING"===m&&P(!0),e(t).off("scroll."+h+"_pin resize."+h+"_pin"),l.off("mousewheel DOMMouseScroll",N),l=void 0),p},this.setClassToggle=function(t,n){var r=e(t);return 0===r.length||"string"!==e.type(n)?p:(u=n,f=r,p.on("enter.internal_class leave.internal_class",function(e){f.toggleClass(u,"enter"===e.type)}),p)},this.removeClassToggle=function(e){return f&&e&&f.removeClass(u),p.off("start.internal_class end.internal_class"),u=void 0,f=void 0,p},this.addTo=function(e){return o!=e?(o&&o.removeScene(p),o=e,T(),D(!0),z(!0),C(),k(),o.info("container").on("resize."+h,function(){x(),p.triggerHook()>0&&p.trigger("shift",{reason:"containerSize"})}),e.addScene(p),p.update(),p):void 0},this.enabled=function(e){return arguments.length?(y!=e&&(y=!!e,p.update(!0)),p):y},this.remove=function(){if(o){o.info("container").off("resize."+h);var e=o;o=void 0,e.removeScene(p)}return p},this.destroy=function(e){return p.removeTween(e),p.removePin(e),p.removeClassToggle(e),p.trigger("destroy",{reset:e}),p.remove(),p.off("start end enter leave progress change update shift destroy shift.internal change.internal progress.internal"),null},this.on=function(t,n){if(e.isFunction(n)){var r=e.trim(t).toLowerCase().replace(/(\w+)\.(\w+)/g,"$1."+h+"_$2").replace(/( |^)(\w+)(?= |$)/g,"$1$2."+h);e(p).on(r,n)}return p},this.off=function(t,n){var r=e.trim(t).toLowerCase().replace(/(\w+)\.(\w+)/g,"$1."+h+"_$2").replace(/( |^)(\w+)(?= |$)/g,"$1$2."+h+"$3");return e(p).off(r,n),p},this.trigger=function(t,n){var r=e.Event(e.trim(t).toLowerCase(),n);return e(p).trigger(r),p},R(),p};n.version="1.1.0-alpha",t.ScrollScene=r,t.ScrollMagic=n;var i=function(t,n){var r={top:0,left:0},i=t[0];if(i)if(i.getBoundingClientRect){var o=i.getBoundingClientRect();r.top=o.top,r.left=o.left,n||(r.top+=e(document).scrollTop(),r.left+=e(document).scrollLeft())}else r=t.offset()||r,n&&(r.top-=e(document).scrollTop(),r.left-=e(document).scrollLeft());return r},o=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName},s=function(e){return["block","flex","list-item","table","-webkit-box"].indexOf(e)>-1}}(jQuery,window);